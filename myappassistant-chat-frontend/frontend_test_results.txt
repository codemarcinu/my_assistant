
> myappassistant-chat-frontend@0.0.0 test
> vitest

info Using tsconfig paths for react-docgen

 DEV  v3.2.4 /home/marcin/Dokumenty/agentai/makeit/AIASISSTMARUBO/myappassistant-chat-frontend

info Using tsconfig paths for react-docgen
info Using tsconfig paths for react-docgen
Port 63315 is in use, trying another one...

⎯⎯⎯⎯⎯⎯ Failed Suites 8 ⎯⎯⎯⎯⎯⎯⎯

 FAIL  |storybook (chromium)| src/stories/Button.stories.ts [ src/stories/Button.stories.ts ]
 FAIL  |storybook (chromium)| src/stories/Header.stories.ts [ src/stories/Header.stories.ts ]
 FAIL  |storybook (chromium)| src/stories/Page.stories.ts [ src/stories/Page.stories.ts ]
 FAIL  |storybook (chromium)| src/components/ui/atoms/Badge.stories.tsx [ src/components/ui/atoms/Badge.stories.tsx ]
 FAIL  |storybook (chromium)| src/components/ui/atoms/Button.stories.tsx [ src/components/ui/atoms/Button.stories.tsx ]
 FAIL  |storybook (chromium)| src/components/ui/atoms/Card.stories.tsx [ src/components/ui/atoms/Card.stories.tsx ]
 FAIL  |storybook (chromium)| src/components/ui/atoms/Input.stories.tsx [ src/components/ui/atoms/Input.stories.tsx ]
 FAIL  |storybook (chromium)| src/components/ui/atoms/Spinner.stories.tsx [ src/components/ui/atoms/Spinner.stories.tsx ]
Error: Failed to import test file /home/marcin/Dokumenty/agentai/makeit/AIASISSTMARUBO/myappassistant-chat-frontend/src/test/setup.ts
Caused by: ReferenceError: global is not defined
 ❯ src/test/setup.ts:6:0

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[1/8]⎯


 Test Files  8 failed (8)
      Tests  no tests
   Start at  23:08:09
   Duration  1.96s (transform 0ms, setup 0ms, collect 0ms, tests 0ms, environment 0ms, prepare 23.12s)

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  src/test/setup.ts 


⎯⎯⎯⎯⎯⎯ Failed Suites 8 ⎯⎯⎯⎯⎯⎯⎯

 FAIL  |storybook (chromium)| src/stories/Button.stories.ts [ src/stories/Button.stories.ts ]
 FAIL  |storybook (chromium)| src/stories/Header.stories.ts [ src/stories/Header.stories.ts ]
 FAIL  |storybook (chromium)| src/stories/Page.stories.ts [ src/stories/Page.stories.ts ]
 FAIL  |storybook (chromium)| src/components/ui/atoms/Badge.stories.tsx [ src/components/ui/atoms/Badge.stories.tsx ]
 FAIL  |storybook (chromium)| src/components/ui/atoms/Button.stories.tsx [ src/components/ui/atoms/Button.stories.tsx ]
 FAIL  |storybook (chromium)| src/components/ui/atoms/Card.stories.tsx [ src/components/ui/atoms/Card.stories.tsx ]
 FAIL  |storybook (chromium)| src/components/ui/atoms/Input.stories.tsx [ src/components/ui/atoms/Input.stories.tsx ]
 FAIL  |storybook (chromium)| src/components/ui/atoms/Spinner.stories.tsx [ src/components/ui/atoms/Spinner.stories.tsx ]
Error: Failed to import test file /home/marcin/Dokumenty/agentai/makeit/AIASISSTMARUBO/myappassistant-chat-frontend/src/test/setup.ts
Caused by: TypeError: Cannot set property localStorage of #<Window> which has only a getter
 ❯ src/test/setup.ts:48:7

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[1/8]⎯


 Test Files  8 failed (8)
      Tests  no tests
   Start at  23:29:23
   Duration  0ms

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  src/test/setup.ts 

 ❯ |storybook (chromium)| src/compo ❯ |storybook (chromium)| src/components/ui/atoms/Button.stories.tsx (8 tests | 8 failed) 482ms
   × Primary 225ms
     → 
[34mClick to debug the error directly in Storybook: http://localhost:6006/?path=/story/atoms-button--primary&addonPanel=storybook/interactions/panel[39m

useTheme must be used within a ThemeProvider
   × Secondary 83ms
     → 
[34mClick to debug the error directly in Storybook: http://localhost:6006/?path=/story/atoms-button--secondary&addonPanel=storybook/interactions/panel[39m

useTheme must be used within a ThemeProvider
   × Outline 42ms
     → 
[34mClick to debug the error directly in Storybook: http://localhost:6006/?path=/story/atoms-button--outline&addonPanel=storybook/interactions/panel[39m

useTheme must be used within a ThemeProvider
   × Ghost 21ms
     → 
[34mClick to debug the error directly in Storybook: http://localhost:6006/?path=/story/atoms-button--ghost&addonPanel=storybook/interactions/panel[39m

useTheme must be used within a ThemeProvider
   × Small 25ms
     → 
[34mClick to debug the error directly in Storybook: http://localhost:6006/?path=/story/atoms-button--small&addonPanel=storybook/interactions/panel[39m

useTheme must be used within a ThemeProvider
   × Large 34ms
     → 
[34mClick to debug the error directly in Storybook: http://localhost:6006/?path=/story/atoms-button--large&addonPanel=storybook/interactions/panel[39m

useTheme must be used within a ThemeProvider
   × Loading 31ms
     → 
[34mClick to debug the error directly in Storybook: http://localhost:6006/?path=/story/atoms-button--loading&addonPanel=storybook/interactions/panel[39m

useTheme must be used within a ThemeProvider
   × Disabled 11ms
     → 
[34mClick to debug the error directly in Storybook: http://localhost:6006/?path=/story/atoms-button--disabled&addonPanel=storybook/interactions/panel[39m

useTheme ❯ |storybook (chromium)| src/components/ui/atoms/Card.stories.tsx (7 tests | 7 failed) 554ms
   × Default 268ms
     → 
[34mClick to debug the error directly in Storybook: http://localhost:6006/?path=/story/atoms-card--default&addonPanel=storybook/interactions/panel[39m

useTheme must be used within a ThemeProvider
   × Small Padding 34ms
     → 
[34mClick to debug the error directly in Storybook: http://localhost:6006/?path=/story/atoms-card--small-padding&addonPanel=storybook/interactions/panel[39m

useTheme must be used within a ThemeProvider
   × Large Padding 40ms
     → 
[34mClick to debug the error directly in Storybook: http://localhost:6006/?path=/story/atoms-card--large-padding&addonPanel=storybook/interactions/panel[39m

useTheme must be used within a ThemeProvider
   × Small Shadow 35ms
     → 
[34mClick to debug the error directly in Storybook: http://localhost:6006/?path=/story/atoms-card--small-shadow&addonPanel=storybook/interactions/panel[39m

useTheme must be used within a ThemeProvider
   × Large Shadow 50ms
     → 
[34mClick to debug the error directly in Storybook: http://localhost:6006/?path=/story/atoms-card--large-shadow&addonPanel=storybook/interactions/panel[39m

useTheme must be used within a ThemeProvider
   × With Content 49ms
     → 
[34mClick to debug the error directly in Storybook: http://localhost:6006/?path=/story/atoms-card--with-content&addonPanel=storybook/interactions/panel[39m

useTheme must be used within a ThemeProvider
   × All Variants 48ms
     → 
[34mClick to debug the error directly in Storybook: http://localhost:6006/?path=/story/atoms-card--all-variants&addonPanel=storybook/interactions/panel[39m

useTheme must be used within a ThemeProvider
 ✓ |storybook (chromium)| src/stori ✓ |storybook (chromium)| src/stories/Button.stories.ts (4 ✓ |storybook (chromium)| src/stori ✓ |storybook (chromium)| src/components/ui/atoms/Badge.stories.tsx (10 tests) 1831ms
   ✓ Default  870ms
 ✓ |storybook (chromium)| src/components/ui/atoms/Spinner.stories.tsx (11 tests) 1951ms
   ✓ Default  778ms
 ✓ |storybook (chromium)| src/components/ui/atoms/Input.stories.tsx (10 ✓ |storybook (chromium)| src/components/ui/atoms/Input.stories.tsx (10 tests) 738ms
   ✓ Default  327ms
 ✓ |storybook (chromium)| src/components/ui/atoms/Spinner.stories.tsx (11 tests) 809ms
   ✓ Default  346ms

⎯⎯⎯⎯⎯⎯ Failed Tests 15 ⎯⎯⎯⎯⎯⎯⎯

 FAIL  |storybook (chromium)| src/components/ui/atoms/Button.stories.tsx > Primary
 FAIL  |storybook (chromium)| src/components/ui/atoms/Button.stories.tsx > Secondary
 FAIL  |storybook (chromium)| src/components/ui/atoms/Button.stories.tsx > Outline
 FAIL  |storybook (chromium)| src/components/ui/atoms/Button.stories.tsx > Ghost
 FAIL  |storybook (chromium)| src/components/ui/atoms/Button.stories.tsx > Small
 FAIL  |storybook (chromium)| src/components/ui/atoms/Button.stories.tsx > Large
 FAIL  |storybook (chromium)| src/components/ui/atoms/Button.stories.tsx > Loading
 FAIL  |storybook (chromium)| src/components/ui/atoms/Button.stories.tsx > Disabled
Error: 
[34mClick to debug the error directly in Storybook: http://localhost:6006/?path=/story/atoms-button--primary&addonPanel=storybook/interactions/panel[39m

useTheme must be used within a ThemeProvider
 ❯ useTheme src/components/ThemeProvider.tsx:86:10
     84|   const context = useContext(ThemeContext);
     85|   if (context === undefined) {
     86|     throw new Error('useTheme must be used within a ThemeProvider');
       |          ^
     87|   }
     88|   return context;
 ❯ Button src/components/ui/atoms/Button.tsx:31:28
 ❯ react-stack-bottom-frame node_modules/react-dom/cjs/react-dom-client.development.js:23863:19
 ❯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:5529:21
 ❯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:8897:18
 ❯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:10522:17
 ❯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:1519:29
 ❯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:15140:21
 ❯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:14956:40
 ❯ renderRootSync node_modules/react-dom/cjs/react-dom-client.development.js:14936:10

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[1/15]⎯

 FAIL  |storybook (chromium)| src/components/ui/atoms/Card.stories.tsx > Default
 FAIL  |storybook (chromium)| src/components/ui/atoms/Card.stories.tsx > Small Padding
 FAIL  |storybook (chromium)| src/components/ui/atoms/Card.stories.tsx > Large Padding
 FAIL  |storybook (chromium)| src/components/ui/atoms/Card.stories.tsx > Small Shadow
 FAIL  |storybook (chromium)| src/components/ui/atoms/Card.stories.tsx > Large Shadow
 FAIL  |storybook (chromium)| src/components/ui/atoms/Card.stories.tsx > With Content
 FAIL  |storybook (chromium)| src/components/ui/atoms/Card.stories.tsx > All Variants
Error: 
[34mClick to debug the error directly in Storybook: http://localhost:6006/?path=/story/atoms-card--default&addonPanel=storybook/interactions/panel[39m

useTheme must be used within a ThemeProvider
 ❯ useTheme src/components/ThemeProvider.tsx:86:10
     84|   const context = useContext(ThemeContext);
     85|   if (context === undefined) {
     86|     throw new Error('useTheme must be used within a ThemeProvider');
       |          ^
     87|   }
     88|   return context;
 ❯ Card src/components/ui/atoms/Card.tsx:17:28
 ❯ react-stack-bottom-frame node_modules/react-dom/cjs/react-dom-client.development.js:23863:19
 ❯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:5529:21
 ❯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:8897:18
 ❯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:10522:17
 ❯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:1519:29
 ❯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:15140:21
 ❯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:14956:40
 ❯ renderRootSync node_modules/react-dom/cjs/react-dom-client.development.js:14936:10

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[2/15]⎯


 Test Files  2 failed | 6 passed (8)
      Tests  15 failed | 39 passed (54)
   Start at  23:29:43
   Duration  17.99s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit

Restarting due to config changes...
info Using tsconfig paths for react-dinfo UWarning: Starting in Storybook 8.5.0-alpha.18, the "test.include" option in Vitest is discouraged in favor of just using the "stories" field in your Storybook configuration.

The values you passed to "test.include" will be ignored, please remove them from your Vitest configuration where the Storybook plugin is applied.

More info: https://github.com/storybookjs/storybook/blob/next/MIGRATION.md#addon-test-indexing-behavior-of-storybookaddon-test-is-changed

 DEV  v3.2.4 /home/marcin/Dokumenty/agentai/makeit/AIASISSTMARUBO/myappassistant-chat-frontend

info Using tsconfig paths for react-docgen
Warning: Starting in Storybook 8.5.0-alpha.18, the "test.include" option in Vitest is discouraged in favor of just using the "stories" field in your Storybook configuration.

The values you passed to "test.include" will be ignored, please remove them from your Vitest configuration where the Storybook plugin is applied.

More info: https://github.com/storybookjs/storybook/blob/next/MIGRATION.md#addon-test-indexing-behavior-of-storybookaddon-test-is-changed
info Using tsconfig paths for react-docgen
 ✓ |0| src/test/__tests__/chatStore.test.tsx (4 tests) 16ms
 ❯ |0| src/test/__tests__/App.test.tsx (1 test | 1 failed) 11ms
   × App > renders without crashing 10ms
     → document is not defined
 ❯ |storybook (chromium)| src/components/ui/atoms/Button.stories.tsx (8 tests | 8 failed) 450ms
   × Primary 267ms
     ❯ |storybook (chromium)| src/components/ui/atoms/Card.stories.tsx (7 tests | 7 failed) 492ms
   × Default 257ms
     → 
[34mClick to debug the error directly in Storybook: http://localhost:6006/?path=/story/atoms-card--default&addonPanel=storybook/interactions/panel[39m

useTheme must be used within a ThemeProvider
   × Small Padding 53ms
     → 
[34mClick to debug the error directly in Storybook: http://localhost:6006/?path=/story/atoms-card--small-padding&addonPanel=storybook/interactions/panel[39m

useTheme must be used within a ThemeProvider
   × Large Padding 45ms
     → 
[34mClick to debug the error directly in Storybook: http://localhost:6006/?path=/story/atoms-card--large-padding&addonPanel=storybook/interactions/panel[39m

useTheme must be used within a ThemeProvider
   × Small Shadow 34ms
     → 
[34mClick to debug the error directly in Storybook: http://localhost:6006/?path=/story/atoms-card--small-shadow&addonPanel=storybook/interactions/panel[39m

useTheme must be used within a ThemeProvider
   × Large Shadow 37ms
     → 
[34mClick to debug the error directly in Storybook: http://localhost:6006/?path=/story/atoms-card--large-shadow&addonPanel=storybook/interactions/panel[39m

useTheme must be used within a ThemeProvider
   × With Content 28ms
     → 
[34mClick to debug the error directly in Storybook: http://localhost:6006/?path=/story/atoms-card--with-content&addonPanel=storybook/interactions/panel[39m

useTheme must be used within a ThemeProvider
   × All Variants 30ms
     → 
[34mClick to debug the error directly in Storybook: http://localhost:6006/?path=/story/atoms-card--all-variants&addonPanel=storybook/interactions/panel[39m

useTheme must be used within a ThemeProvider
 ❯ |storybook (chromium)| src/components/ui/atoms/Button.stories.tsx (8 tests | 8 failed) 770ms
   × Primary 372ms
     → 
[34mClick to debug the error directly in Storybook: http://localhost:6006/?path=/story/atoms-button--primary&addonPanel=storybook/interactions/panel[39m

useTheme must be used within a ThemeProvider
   × Secondary 24ms
     → 
[34mClick to debug the error directly in Storybook: http://localhost:6006/?path=/story/atoms-button--secondary&addonPanel=storybook/interactions/panel[39m

useTheme must be used within a ThemeProvider
   × Outline 26ms
     → 
[34mClick to debug the error directly in Storybook: http://localhost:6006/?path=/story/atoms-button--outline&addonPanel=storybook/interactions/panel[39m

useTheme must be used within a ThemeProvider
   × Ghost 43ms
     → 
[34mClick to debug the error directly in Storybook: http://localhost:6006/?path=/story/atoms-button--ghost&addonPanel=storybook/interactions/panel[39m

useTheme must be used within a ThemeProvider
   × Small 101ms
     → 
[34mClick to debug the error directly in Storybook: http://localhost:6006/?path=/story/atoms-button--small&addonPanel=storybook/interactions/panel[39m

useTheme must be used within a ThemeProvider
   × Large 72ms
     → 
[34mClick to debug the error directly in Storybook: http://localhost:6006/?path=/story/atoms-button--large&addonPanel=storybook/interactions/panel[39m

useTheme must be used within a ThemeProvider
   × Loading 51ms
     → 
[34mClick to debug the error directly in Storybook: http://localhost:6006/?path=/story/atoms-button--loading&addonPanel=storybook/interactions/panel[39m

useTheme must be used within a ThemeProvider
   × Disabled 66ms
     → 
[34mClick to debug the error directly in Storybook: http://localhost:6006/?pat ✓ |storybook (chromium)| src/stories/Page.stories.ts (2 tests) 1389ms
   ✓ Logged Out  915ms
   ✓ Logged In  470ms
 ✓ |storybook (chromium)| src/components/ui/atoms/Input.stories.tsx (10 tests) 1964ms
   ✓ Default  728ms
 ✓ |storyboo ✓ |storybook (chromium)| src/components/ui/atoms/Input.stories.tsx (10 tests) 2202ms
   ✓ Default  996ms
 ✓ |storybook (chromium)| src/components/ui/atoms/Badge.stories.tsx (10 tests) 2185ms
   ✓ Default  1012ms
 ✓ |storybook (chromium)| src/components/ui/atoms/Spinner.stories.tsx (11 tests) 2297ms
   ✓ Default  1150ms
 ✓ |storybook (chromium)| src/stories/Button.stories.ts (4 tests) 734ms
   ✓ Primary  574ms
 ✓ |storybook (chromium)| src/stories/Header.stories.ts (2 tests) 441ms
   ✓ Logged In  382ms

⎯⎯⎯⎯⎯⎯ Failed Suites 1 ⎯⎯⎯⎯⎯⎯⎯

 FAIL  |0| src/test/__tests__/ChatBubble.test.tsx [ src/test/__tests__/ChatBubble.test.tsx ]
ReferenceError: describe is not defined
 ❯ src/test/__tests__/ChatBubble.test.tsx:7:1
      5| import { ThemeProvider } from '../../components/ThemeProvider';
      6| 
      7| describe('ChatBubble', () => {
       | ^
      8|   const renderBubble = (message: Message) => {
      9|     return render(

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[1/17]⎯


⎯⎯⎯⎯⎯⎯ Failed Tests 16 ⎯⎯⎯⎯⎯⎯⎯

 FAIL  |0| src/test/__tests__/App.test.tsx > App > renders without crashing
ReferenceError: document is not defined
 ❯ Proxy.render node_modules/@testing-library/react/dist/pure.js:257:5
 ❯ Module.customRender src/test/utils.tsx:31:6
     29|   ui: ReactElement,
     30|   options?: Omit<RenderOptions, 'wrapper'>
     31| ) => render(ui, { wrapper: AllTheProviders, ...options });
       |      ^
     32| 
     33| // Re-export everything
 ❯ renderApp src/test/__tests__/App.test.tsx:14:12
 ❯ src/test/__tests__/App.test.tsx:25:7
 ❯ Proxy.process.env.NODE_ENV.exports.act node_modules/react/cjs/react.development.js:789:22
 ❯ src/test/__tests__/App.test.tsx:24:11

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[2/17]⎯

 FAIL  |storybook (chromium)| src/components/ui/atoms/Button.stories.tsx > Primary
 FAIL  |storybook (chromium)| src/components/ui/atoms/Button.stories.tsx > Secondary
 FAIL  |storybook (chromium)| src/components/ui/atoms/Button.stories.tsx > Outline
 FAIL  |storybook (chromium)| src/components/ui/atoms/Button.stories.tsx > Ghost
 FAIL  |storybook (chromium)| src/components/ui/atoms/Button.stories.tsx > Small
 FAIL  |storybook (chromium)| src/components/ui/atoms/Button.stories.tsx > Large
 FAIL  |storybook (chromium)| src/components/ui/atoms/Button.stories.tsx > Loading
 FAIL  |storybook (chromium)| src/components/ui/atoms/Button.stories.tsx > Disabled
Error: 
[34mClick to debug the error directly in Storybook: http://localhost:6006/?path=/story/atoms-button--primary&addonPanel=storybook/interactions/panel[39m

useTheme must be used within a ThemeProvider
 ❯ useTheme src/components/ThemeProvider.tsx:86:10
     84|   const context = useContext(ThemeContext);
     85|   if (context === undefined) {
     86|     throw new Error('useTheme must be used within a ThemeProvider');
       |          ^
     87|   }
     88|   return context;
 ❯ Button src/components/ui/atoms/Button.tsx:31:28
 ❯ react-stack-bottom-frame node_modules/react-dom/cjs/react-dom-client.development.js:23863:19
 ❯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:5529:21
 ❯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:8897:18
 ❯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:10522:17
 ❯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:1519:29
 ❯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:15140:21
 ❯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:14956:40
 ❯ renderRootSync node_modules/react-dom/cjs/react-dom-client.development.js:14936:10

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[3/17]⎯

 FAIL  |storybook (chromium)| src/components/ui/atoms/Card.stories.tsx > Default
 FAIL  |storybook (chromium)| src/components/ui/atoms/Card.stories.tsx > Small Padding
 FAIL  |storybook (chromium)| src/components/ui/atoms/Card.stories.tsx > Large Padding
 FAIL  |storybook (chromium)| src/components/ui/atoms/Card.stories.tsx > Small Shadow
 FAIL  |storybook (chromium)| src/components/ui/atoms/Card.stories.tsx > Large Shadow
 FAIL  |storybook (chromium)| src/components/ui/atoms/Card.stories.tsx > With Content
 FAIL  |storybook (chromium)| src/components/ui/atoms/Card.stories.tsx > All Variants
Error: 
[34mClick to debug the error directly in Storybook: http://localhost:6006/?path=/story/atoms-card--default&addonPanel=storybook/interactions/panel[39m

useTheme must be used within a ThemeProvider
 ❯ useTheme src/components/ThemeProvider.tsx:86:10
     84|   const context = useContext(ThemeContext);
     85|   if (context === undefined) {
     86|     throw new Error('useTheme must be used within a ThemeProvider');
       |          ^
     87|   }
     88|   return context;
 ❯ Card src/components/ui/atoms/Card.tsx:17:28
 ❯ react-stack-bottom-frame node_modules/react-dom/cjs/react-dom-client.development.js:23863:19
 ❯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:5529:21
 ❯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:8897:18
 ❯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:10522:17
 ❯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:1519:29
 ❯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:15140:21
 ❯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:14956:40
 ❯ renderRootSync node_modules/react-dom/cjs/react-dom-client.development.js:14936:10

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[4/17]⎯


 Test Files  4 failed | 7 passed (11)
      Tests  16 failed | 43 passed (59)
   Start at  23:30:29
   Duration  7.67s (transform 1.04s, setup 10.33s, collect 5.14s, tests 10.63s, enviro
Restarting due to config changes...
info Using tsconfig paths for react-docgen
Warning: Starting in Storybook 8.5.0-alpha.18, the "test.include" option in Vitest is discouraged in favor of just using the "Warning: Starting in Storybook 8.5.0-alpha.18, the "test.include" option in Vitest is discouraged in favor of just using the "stories" field in your Storybook configuration.

The values you passed to "test.include" will be ignored, please remove them from your Vitest configuration where the Storybook plugin is applied.

More info: h
 DEV  v3.2.4 /home/marcin/Dokumenty/agentai/makeit/AIASISSTMARUBO/myappassistant-chat-frontend

info Using tsconfig paths for react-docgen
info Using tsconfig paths for react-docgen
Warning: Starting in Storybook 8.5.0-alpha.18, the "test.include" option in Vitest Warning: Starting in Storybook 8.5.0-alpha.18, the "test.include" option in Vitest is discouraged in favor of just using the "stories" field in your Storybook configuration.

The values you passed to "test.include" will be ignored, please remove them from your Vitest configuration where the Storybook plugin is applied.

More info: https://github.com/storybookjs/storybook/blob/next/MIGRATION.md#addon-test-indexing-beha ✓ |0| src/test/__tests__/chatStore.test.tsx (4 tests) 6ms
 ❯ |0| src/test/__tests__/App.test.tsx (1 test | 1 failed) 8ms
   × App > renders without crashing 7ms
     → document is not defined
 ❯ |storybook (chromium)| src/components/ui/atoms/Button.stories.tsx (8 tests | 8 failed) 573ms
   × Primary 252ms
     → 
[34mClick to debug the error directly in Storybook: http://localhost:6006/?path=/story/atoms-button--primary&addonPanel=storybook/interactions/panel[39m

useTheme must be used within a ThemeProvider
   × Secondary 17ms
     → 
[34mClick to debug the error directly in Storybook: http://localhost:6006/?path=/story/atoms-button--secondary&addonPanel=storybook/interactions/panel[39m

useTheme must be used within a ThemeProvider
   × Outline 12ms
     → 
[34mClick to debug the error directly in Storybook: http://localhost:6006/?path=/story/atoms-button--outline&addonPanel=storybook/interactions/panel[39m

useTheme must be used within a ThemeProvider
   × Ghost 21ms
     → 
[34mClick to debug the error directly in Storybook: http://localhost:6006/?path=/story/atoms-button--ghost&addonPanel=storybook/interactions/panel[39m

useTheme must be used within a ThemeProvider
   × Small 17ms
     → 
[34mClick to debug the error directly in Storybook: http://localhost:6006/?path=/story/atoms-button--small&addonPanel=storybook/interactions/panel[39m

useTheme must be used within a ThemeProvider
   × Large 45ms
     → 
[34mClick to debug the error directly in Storybook: http://localhost:6006/?path=/story/atoms-button--large&addonPanel=storybook/interactions/panel[39m

useTheme must be used within a ThemeProvider
   × Loading 105ms
     → 
[34mClick to debug the error directly in Storybook: http://localhost:6006/?path=/story/atoms-button--loading&addonPanel=storybook/interactions/panel[39m

useTheme must be used within a ThemeProvider
   × Disabled 88ms
     → 
[34mClick to debug the error directly in Storybook: http://localhost:6006/?path=/story/atoms-button--disabled&addonPanel=storybook/interactions/panel[39m

useTheme must be used within a ThemeProvider
 ❯ |storybook (chromium)| src/components/ui/atoms/Card.stories.tsx (7 tests | 7 failed) 664ms
   × Default 266ms
     → 
[34mClick to debug the error directly in Storybook: http://localhost:6006/?path=/story/atoms-card--default&addonPanel=storybook/interactions/panel[39m

useTheme must be used within a ThemeProvider
   × Small Padding 51ms
     → 
[34mClick to debug the error directly in Storybook: http://localhost:6006/?path=/story/atoms-card--small-padding&addonPanel=storybook/interactions/panel[39m

useTheme must be used within a ThemeProvider
   × Large Padding 117ms
     → 
[34mClick to debug the error directly in Storybook: http://localhost:6006/?path=/story/atoms-card--large-padding&addonPanel=storybook/interactions/panel[39m

useTheme must be used within a ThemeProvider
   × Small Shadow 55ms
     → 
[34mClick to debug the error directly in Storybook: http://localhost:6006/?path=/story/atoms-card--small-shadow&addonPanel=storybook/interactions/panel[39m

useTheme must be used within a ThemeProvider
   × Large Shadow 53ms
     → 
[34mClick to debug the error directly in Storybook: http://localhost:6006/?path=/story/atoms-card--large-shadow&addonPanel=storybook/interactions/panel[39m

useTheme must be used within a ThemeProvider
   × With Content 45ms
     → 
[34mClick to debug the error directly in Storybook: http://localhost:6006/?path=/story/atoms-card--with-content&addonPanel=storybook/interactions/panel[39m

useTheme must be used within a ThemeProvider
   × All Variants 46ms
     → 
[34mClick to debug the error directly in Storybook: http://localhost:6006/?path=/story/atoms-card--all-variants&addonPanel=storybook/interactions/panel[39m

useTheme must be used within a ThemeProvider
 ✓ |storybook (chromium)| src/stories/Page.stories.ts (2 tests) 1746ms
   ✓ Logged Out  1320ms
   ✓ Logged In  420ms
 ✓ |storybook (chromium)| src/components/ui/atoms/Badge.stories.tsx (10 tests) 2138ms
   ✓ Default  795ms
 ✓ |storybook (chromium)| src/components/ui/atoms/Spinner.stories.tsx (11 tests) 2134ms
   ✓ Default  788ms
 ✓ |storybook (chromium)| src/components/ui/atoms/Input.stories.tsx (10 tests) 2170ms
   ✓ Default  826ms
 ✓ |storybook (chromium)| src/stories/Button.stories.ts (4 tests) 892ms
   ✓ Primary  682ms
 ✓ |storybook (chromium)| src/stories/Header.stories.ts (2 tests) 699ms
   ✓ Logged In  629ms

⎯⎯⎯⎯⎯⎯ Failed Suites 1 ⎯⎯⎯⎯⎯⎯⎯

 FAIL  |0| src/test/__tests__/ChatBubble.test.tsx [ src/test/__tests__/ChatBubble.test.tsx ]
ReferenceError: describe is not defined
 ❯ src/test/__tests__/ChatBubble.test.tsx:7:1
      5| import { ThemeProvider } from '../../components/ThemeProvider';
      6| 
      7| describe('ChatBubble', () => {
       | ^
      8|   const renderBubble = (message: Message) => {
      9|     return render(

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[1/17]⎯


⎯⎯⎯⎯⎯⎯ Failed Tests 16 ⎯⎯⎯⎯⎯⎯⎯

 FAIL  |0| src/test/__tests__/App.test.tsx > App > renders without crashing
ReferenceError: document is not defined
 ❯ Proxy.render node_modules/@testing-library/react/dist/pure.js:257:5
 ❯ Module.customRender src/test/utils.tsx:31:6
     29|   ui: ReactElement,
     30|   options?: Omit<RenderOptions, 'wrapper'>
     31| ) => render(ui, { wrapper: AllTheProviders, ...options });
       |      ^
     32| 
     33| // Re-export everything
 ❯ renderApp src/test/__tests__/App.test.tsx:14:12
 ❯ src/test/__tests__/App.test.tsx:25:7
 ❯ Proxy.process.env.NODE_ENV.exports.act node_modules/react/cjs/react.development.js:789:22
 ❯ src/test/__tests__/App.test.tsx:24:11

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[2/17]⎯

 FAIL  |storybook (chromium)| src/components/ui/atoms/Button.stories.tsx > Primary
 FAIL  |storybook (chromium)| src/components/ui/atoms/Button.stories.tsx > Secondary
 FAIL  |storybook (chromium)| src/components/ui/atoms/Button.stories.tsx > Outline
 FAIL  |storybook (chromium)| src/components/ui/atoms/Button.stories.tsx > Ghost
 FAIL  |storybook (chromium)| src/components/ui/atoms/Button.stories.tsx > Small
 FAIL  |storybook (chromium)| src/components/ui/atoms/Button.stories.tsx > Large
 FAIL  |storybook (chromium)| src/components/ui/atoms/Button.stories.tsx > Loading
 FAIL  |storybook (chromium)| src/components/ui/atoms/Button.stories.tsx > Disabled
Error: 
[34mClick to debug the error directly in Storybook: http://localhost:6006/?path=/story/atoms-button--primary&addonPanel=storybook/interactions/panel[39m

useTheme must be used within a ThemeProvider
 ❯ useTheme src/components/ThemeProvider.tsx:86:10
     84|   const context = useContext(ThemeContext);
     85|   if (context === undefined) {
     86|     throw new Error('useTheme must be used within a ThemeProvider');
       |          ^
     87|   }
     88|   return context;
 ❯ Button src/components/ui/atoms/Button.tsx:31:28
 ❯ react-stack-bottom-frame node_modules/react-dom/cjs/react-dom-client.development.js:23863:19
 ❯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:5529:21
 ❯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:8897:18
 ❯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:10522:17
 ❯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:1519:29
 ❯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:15140:21
 ❯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:14956:40
 ❯ renderRootSync node_modules/react-dom/cjs/react-dom-client.development.js:14936:10

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[3/17]⎯

 FAIL  |storybook (chromium)| src/components/ui/atoms/Card.stories.tsx > Default
 FAIL  |storybook (chromium)| src/components/ui/atoms/Card.stories.tsx > Small Padding
 FAIL  |storybook (chromium)| src/components/ui/atoms/Card.stories.tsx > Large Padding
 FAIL  |storybook (chromium)| src/components/ui/atoms/Card.stories.tsx > Small Shadow
 FAIL  |storybook (chromium)| src/components/ui/atoms/Card.stories.tsx > Large Shadow
 FAIL  |storybook (chromium)| src/components/ui/atoms/Card.stories.tsx > With Content
 FAIL  |storybook (chromium)| src/components/ui/atoms/Card.stories.tsx > All Variants
Error: 
[34mClick to debug the error directly in Storybook: http://localhost:6006/?path=/story/atoms-card--default&addonPanel=storybook/interactions/panel[39m

useTheme must be used within a ThemeProvider
 ❯ useTheme src/components/ThemeProvider.tsx:86:10
     84|   const context = useContext(ThemeContext);
     85|   if (context === undefined) {
     86|     throw new Error('useTheme must be used within a ThemeProvider');
       |          ^
     87|   }
     88|   return context;
 ❯ Card src/components/ui/atoms/Card.tsx:17:28
 ❯ react-stack-bottom-frame node_modules/react-dom/cjs/react-dom-client.development.js:23863:19
 ❯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:5529:21
 ❯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:8897:18
 ❯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:10522:17
 ❯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:1519:29
 ❯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:15140:21
 ❯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:14956:40
 ❯ renderRootSync node_modules/react-dom/cjs/react-dom-client.development.js:14936:10

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[4/17]⎯


 Test Files  4 failed | 7 passed (11)
      Tests  16 failed | 43 passed (59)
   Start at  23:30:41
   Duration  7.09s (transform 1.12s, setup 8.64s, collect 4.48s, tests 11.03s, environment 1ms, prepare 10855.25s)

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
node:events:502
      throw er; // Unhandled 'error' event
      ^

Error: Worker exited unexpectedly
    at ChildProcess.onUnexpectedExit (file:///home/marcin/Dokumentynode:events:502
      throw er; // Unhandled 'error' event
      ^

Error: Worker exited unexpectedly
    at ChildProcess.onUnexpectedExit (file:///home/marcin/Dokumenty/agentai/makeit/AIASISSTMARUBO/myappassistant-chat-frontend/node_modules/tinypool/dist/index.js:118:30)
    at ChildProcess.emit (node:events:536:35)
    at ChildProcess._handle.onexit (node:internal/child_process:293:12)
    at Process.callbackTrampoline (node:internal/async_hooks:130:17)
Emitted 'error' event on Tinypool instance at:
    at EventEmitterReferencingAsyncResource.runInAsyncScope (node:async_hooks:206:9)
    at Tinypool.emit (node:events:170:18)
    at file:///home/marcin/Dokumenty/agentai/makeit/AIASISSTMARUBO/myappassistant-chat-frontend/node_modules/tinypool/dist/index.js:594:30
    at ChildProcess.<anonymous> (file:///home/marcin/Dokumenty/agentai/makeit/AIASISSTMARUBO/myappassistant-chat-frontend/node_modules/tinypool/dist/index.js:162:34)
    at ChildProcess.emit (node:events:524:28)
    at ChildProcess.onUnexpectedExit (file:///home/marcin/Dokumenty/agentai/makeit/AIASISSTMARUBO/myappassistant-chat-frontend/node_modules/tinypool/dist/index.js:118:16)
    at ChildProcess.emit (node:events:536:35)
    at ChildProcess._handle.onexit (node:internal/child_process:293:12)
    at Process.callbackTrampoline (node:internal/async_hooks:130:17)

Node.js v20.19.3
